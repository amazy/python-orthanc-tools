version: "3"
services:
  orthanc-a:
    image: osimis/orthanc:21.11.0
    ports: ["10042:8042"]
    environment:
      VERBOSE_STARTUP: "true"
      VERBOSE_ENABLED: "true"
      TRANSFERS_PLUGIN_ENABLED: "true"
      ORTHANC__STABLE_AGE: "1"
      ORTHANC__REGISTERED_USERS: |
        {"test": "test"}
      ORTHANC__DICOM_AET: "ORTHANC-A"
      ORTHANC__DICOM_MODALITIES: |
        {
          "orthanc-a": ["ORTHANC-A", "orthanc-a", 4242],
          "orthanc-b": ["ORTHANC-B", "orthanc-b", 4242],
          "orthanc-c": ["ORTHANC-C", "orthanc-c", 4242]
        }
      ORTHANC__ORTHANC_PEERS: |
        {
          "orthanc-a": ["http://orthanc-a:8042/", "test", "test"],
          "orthanc-b": ["http://orthanc-b:8042/", "test", "test"],
          "orthanc-c": ["http://orthanc-c:8042/", "test", "test"]
        }

  orthanc-b:
    image: osimis/orthanc:21.11.0
    ports: ["10043:8042"]
    environment:
      VERBOSE_STARTUP: "true"
      VERBOSE_ENABLED: "true"
      TRANSFERS_PLUGIN_ENABLED: "true"
      ORTHANC__REGISTERED_USERS: |
        {
          "test": "test"
        }
      ORTHANC__DICOM_AET: "ORTHANC-B"
      ORTHANC__DICOM_MODALITIES: |
        {
          "orthanc-a": ["ORTHANC-A", "orthanc-a", 4242],
          "orthanc-b": ["ORTHANC-B", "orthanc-b", 4242],
          "orthanc-c": ["ORTHANC-C", "orthanc-c", 4242]
        }
      ORTHANC__ORTHANC_PEERS: |
        {
          "orthanc-a": ["http://orthanc-a:8042/", "test", "test"],
          "orthanc-b": ["http://orthanc-b:8042/", "test", "test"],
          "orthanc-c": ["http://orthanc-c:8042/", "test", "test"]
        }

  orthanc-c:
    image: osimis/orthanc:21.11.0
    ports: ["10044:8042"]
    environment:
      VERBOSE_STARTUP: "true"
      VERBOSE_ENABLED: "true"
      TRANSFERS_PLUGIN_ENABLED: "true"
      ORTHANC__REGISTERED_USERS: |
        {"test": "test"}
      ORTHANC__DICOM_AET: "ORTHANC-C"
      ORTHANC__DICOM_MODALITIES: |
        {
          "orthanc-a": ["ORTHANC-A", "orthanc-a", 4242],
          "orthanc-b": ["ORTHANC-B", "orthanc-b", 4242],
          "orthanc-c": ["ORTHANC-C", "orthanc-c", 4242]
        }
      ORTHANC__ORTHANC_PEERS: |
        {
          "orthanc-a": ["http://orthanc-a:8042/", "test", "test"],
          "orthanc-b": ["http://orthanc-b:8042/", "test", "test"],
          "orthanc-c": ["http://orthanc-c:8042/", "test", "test"]
        }
